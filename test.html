<!DOCTYPE html>
<html>

<head>
  <!-- 必须的 meta 标签 -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap 的 CSS 文件 -->
  <link rel="stylesheet" href="./css/bootstrap.min.css">
  <script src="./js/jquery-3.5.1.min.js"></script>
  <script src="./js/jquery-3.5.1.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="./js/bootstrap.min.js"></script>

  <!--flv.js 的 js 文件-->
  <script src="js/flv.min.js"></script>

  <title>BST Live</title>
  <style>
    body {
      background: url("img/bg.png");
    }
  </style>

</head>

<body>
  <br>
  <div class="text-center">
    <video id="videoElement" style=" width: 80%; " class=" rounded border" controls autoplay></video>
  </div><br>
  <div class="text-center">
    <p style="color: #646464;">由 BST Live 提供直播推流支持</p>
  </div>
  <script>

    if (flvjs.isSupported()) {
      var live_url = getQueryVariable("lurl")
      var live_password = getQueryVariable("sign")
      var saigo_url = `${live_url}sign=${live_password}`
      console.log(live_url)
      console.log(live_password)
      console.log(saigo_url)
      var videoElement = document.getElementById('videoElement');
      var flvPlayer = flvjs.createPlayer({
        type: 'flv',
        url: saigo_url
      });
      flvPlayer.attachMediaElement(videoElement);
      flvPlayer.load();
      flvPlayer.play();
    }

    function getQueryVariable(variable) {
      var query = window.location.search.substring(1);
      var vars = query.split("&");
      for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split("=");
        if (pair[0] == variable) { return pair[1]; }
      }
      return (false);
    }


  </script>
</body>

</html>